(:quote, (:block,
    (:line, 3, :none),
    (:call, :mktempdir, (:->, (:tuple, :temp_dir), (:block,
          (:line, 5, :none),
          (:(=), :file, (:call, :joinpath, :temp_dir, "ip")),
          (:line, 6, :none),
          (:macrocall, Symbol("@test"), (:call, :(==), (:call, :download, "http://httpbin.org/ip", :file), :file)),
          (:line, 7, :none),
          (:macrocall, Symbol("@test"), (:call, :isfile, :file)),
          (:line, 8, :none),
          (:macrocall, Symbol("@test"), (:call, :!, (:call, :isempty, (:call, :read, :file)))),
          (:line, 11, :none),
          (:(=), :empty_file, (:call, :joinpath, :temp_dir, "empty")),
          (:line, 12, :none),
          (:macrocall, Symbol("@test"), (:call, :(==), (:call, :download, "http://httpbin.org/status/200", :empty_file), :empty_file)),
          (:line, 15, :none),
          (:macrocall, Symbol("@test"), (:||, (:call, :!, (:call, :isfile, :empty_file)), (:call, :isempty, (:call, :read, :empty_file)))),
          (:line, 18, :none),
          (:(=), :missing_file, (:call, :joinpath, :temp_dir, "missing")),
          (:line, 19, :none),
          (:macrocall, Symbol("@test_throws"), :ErrorException, (:call, :download, "http://httpbin.org/status/404", :missing_file)),
          (:line, 20, :none),
          (:macrocall, Symbol("@test"), (:call, :!, (:call, :isfile, :missing_file))),
          (:line, 23, :none),
          (:(=), :invalid_host_file, (:call, :joinpath, :temp_dir, "invalid_host")),
          (:line, 24, :none),
          (:macrocall, Symbol("@test_throws"), :ErrorException, (:call, :download, "http://192.0.2.1", :invalid_host_file)),
          (:line, 25, :none),
          (:macrocall, Symbol("@test"), (:call, :!, (:call, :isfile, :invalid_host_file)))
        )))
  ))